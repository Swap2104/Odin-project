"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5408],{41932:function(e,t,n){n.d(t,{Z:function(){return c}});var o=n(51217),r=n(22830),i=n(35250),a=n(70079),s=n(19012);function c(e){var t=e.text,n=(0,s.Z)(),o=(0,r._)((0,a.useState)(!0),2),c=o[0],u=o[1],d=(0,r._)((0,a.useState)(0),2),f=d[0],h=d[1],g=(0,a.useMemo)(function(){return new l().humanTypingDelaysQuertyDistance(t)},[t]);return(0,a.useEffect)(function(){t&&c&&(u(!0),g.forEach(function(e,t){setTimeout(function(){n()&&(h(t),t===g.length-1&&u(!1))},e)}))},[g,n,c,t]),(0,i.jsx)(i.Fragment,{children:t.substring(0,f+1)})}var l=function(){function e(){(0,o._)(this,e)}var t=e.prototype;return t.qwertyDistance=function(e,t){var n,o,i={q:[0,0],w:[1,0],e:[2,0],r:[3,0],t:[4,0],y:[5,0],u:[6,0],i:[7,0],o:[8,0],p:[9,0],a:[0,1],s:[1,1],d:[2,1],f:[3,1],g:[4,1],h:[5,1],j:[6,1],k:[7,1],l:[8,1],z:[0,2],x:[1,2],c:[2,2],v:[3,2],b:[4,2],n:[5,2],m:[6,2]},a=(0,r._)(null!==(n=i[e.toLowerCase()])&&void 0!==n?n:[0,0],2),s=a[0],c=a[1],l=(0,r._)(null!==(o=i[t.toLowerCase()])&&void 0!==o?o:[0,0],2);return Math.abs(s-l[0])+Math.abs(c-l[1])},t.humanTypingDelaysQuertyDistance=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,o=0,r=[],i=0;i<e.length;++i){var a=void 0;if(i>0){var s=this.qwertyDistance(e[i-1],e[i]);a=0===s?this.getRandomInt(t,Math.floor(n/2)):1===s?this.getRandomInt(t,Math.floor(2*n/3)):this.getRandomInt(t,n)}else a=this.getRandomInt(t,n);r.push(a+o),o+=a}return r},t.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e}()},80267:function(e,t,n){n.d(t,{V:function(){return ec},Z:function(){return ei}});var o=n(39324),r=n(71209),i=n(22830),a=n(4337),s=n(35250),c=n(28735),l=n(10664),u=n(90408),d=n(82081),f=n(19841),h=n(72201),g=n(26430),v=n(84913),y=n(44043),m=n(82187),p=n(69262),b=n(70737),x=n(97296),k=n(91530),C=n.n(k),j=n(60554),M=n.n(j),w=n(70079),_=n(1454),T=n(94968),Z=n(70671),B=n(32004),D=n(21389),N=n(95137),E=n(32877),S=n(37469),A=n(78931),L=n(33669),I=n(66085),R=n(2166),K=n(21817),z=n(41932),P=n(67273),F=n(61402),$=n(79579),U=n(89368),Y=n(20522),V=n(59100),Q=n(1821),q=n(2295);function O(){var e=(0,a._)(["flex flex-col gap-2 pb-2 dark:text-gray-100 text-gray-800 text-sm\n",""]);return O=function(){return e},e}function W(){var e=(0,a._)(["flex p-3 items-center gap-3 relative rounded-md hover:bg-gray-100 dark:hover:bg-[#2A2B32] cursor-pointer break-all\n","\n"]);return W=function(){return e},e}function H(){var e=(0,a._)(["flex py-3 px-3 items-center gap-3 gizmo:gap-2 relative rounded-md hover:bg-gray-100 dark:hover:bg-[#2A2B32] cursor-pointer hover:pr-14 break-all\n","\n"]);return H=function(){return e},e}function X(){var e=(0,a._)(["text-sm border-none bg-transparent p-0 m-0 w-full"]);return X=function(){return e},e}function G(){var e=(0,a._)(["flex-1 text-ellipsis max-h-5 overflow-hidden break-all relative"]);return G=function(){return e},e}function J(){var e=(0,a._)(["h-9 pb-2 pt-3 px-3 text-xs text-gray-500 font-medium text-ellipsis overflow-hidden break-all bg-gray-50 gizmo:bg-white dark:bg-gray-900 gizmo:dark:bg-gray-800"]);return J=function(){return e},e}function ee(){var e=(0,a._)(["absolute inset-y-0 right-0 w-8 z-10 bg-gradient-to-l\n",""]);return ee=function(){return e},e}function et(){var e=(0,a._)(["absolute flex right-1 z-10 dark:text-gray-300 text-gray-800\n",""]);return et=function(){return e},e}function en(){var e=(0,a._)(["p-1 hover:text-token-text-primary"]);return en=function(){return e},e}var eo=(0,T.vU)({historyBucketToday:{id:"history.bucket.today",defaultMessage:"Today",description:"Label for today's history bucket"},historyBucketYesterday:{id:"history.bucket.yesterday",defaultMessage:"Yesterday",description:"Label for yesterday's history bucket"},historyBucketLastSeven:{id:"history.bucket.lastSeven",defaultMessage:"Previous 7 Days",description:"Label for the history bucket of the previous 7 days"},historyBucketLastThirty:{id:"history.bucket.lastThirty",defaultMessage:"Previous 30 Days",description:"Label for the history bucket of the previous 30 days"},unableToLoadHistory:{id:"history.unableToLoad",defaultMessage:"Unable to load history",description:"Error message when history fails to load"},retryButton:{id:"history.retryButton",defaultMessage:"Retry",description:"Button to retry loading history"},showMoreButton:{id:"history.showMoreButton",defaultMessage:"Show more",description:"Button to show more history items"},deleteModalTitle:{id:"history.deleteModalTitle",defaultMessage:"Delete chat?",description:"Title of the modal to confirm deleting a conversation"},deleteModalBody:{id:"history.deleteModalBody",defaultMessage:"This will delete {title}.",description:"Body of the modal to confirm deleting a conversation"},deleteModalConfirm:{id:"history.deleteModalConfirm",defaultMessage:"Delete",description:"Button to confirm deleting a conversation"},deleteModalCancel:{id:"history.deleteModalCancel",defaultMessage:"Cancel",description:"Button to cancel deleting a conversation"}}),er={initial:function(e){return e.isNew?{opacity:0,height:0,overflow:"hidden"}:{}},animate:function(){return{opacity:1,height:"auto"}},exit:function(){return{opacity:0,height:0}}};function ei(e){var t,n,r=e.activeId,a=e.onNewThread,c=(0,Z.Z)(),l=(0,i._)((0,w.useState)(!1),2),u=l[0],d=l[1],k=(0,i._)((0,w.useState)(0),2),C=k[0],j=k[1],M=(0,K.Z)(),_=(0,q.MO)(),T=_.conversations,D=_.hasNextPage,N=_.fetchNextPage,S=_.isLoading,L=_.isFetchingNextPage,I=_.isError,R=(0,A.hz)().has(E.DY),z=(0,w.useRef)(null),F=(0,w.useCallback)(function(e){var t;R&&!S&&null!=e&&(null===(t=z.current)||void 0===t||t.disconnect(),z.current=new IntersectionObserver(function(e){e[0].isIntersecting&&D&&N()}),z.current.observe(e))},[R,S,D,N]);(0,w.useEffect)(function(){return function(){var e;null===(e=z.current)||void 0===e||e.disconnect()}},[]);var $=(0,q.iF)();(0,q.Od)();var U=(t=(0,w.useRef)(),n=(0,w.useRef)(),((0,w.useEffect)(function(){t.current=n.current,n.current=T},[T]),T===n.current)?t.current:n.current);(0,w.useEffect)(function(){M(function(){j(C+1)},(0,g.Z)((0,v.Z)(),Date.now())+1e3)},[C,M]);var O=0===T.length,W=(0,Y.Ml)(),H=(0,w.useMemo)(function(){return T.reduce(function(e,t){var n,o,r=new Date(null!==(o=null!==(n=t.update_time)&&void 0!==n?n:t.create_time)&&void 0!==o?o:0),i=(0,h.Z)(new Date,r);if(0===i)e.recent.today.items.push(t);else if(i<=1)e.recent.yesterday.items.push(t);else if(i<=7)e.recent.lastSeven.items.push(t);else if(i<=30)e.recent.lastThirty.items.push(t);else if((0,p.Z)(r)){var a=(0,m.Z)(r),s=(0,y.Z)(r),l="".concat(a,"-").concat(s);e.dynamicMonths[l]?e.dynamicMonths[l].items.push(t):e.dynamicMonths[l]={label:c.formatDate(r,{month:"long"}),items:[t]}}else{var u=(0,m.Z)(r),d="".concat(u,"-");e.dynamicYears[d]?e.dynamicYears[d].items.push(t):e.dynamicYears[d]={label:c.formatDate(r,{year:"numeric"}),items:[t]}}return e},{recent:{today:{label:(0,s.jsx)(B.Z,(0,o._)({},eo.historyBucketToday)),items:[]},yesterday:{label:(0,s.jsx)(B.Z,(0,o._)({},eo.historyBucketYesterday)),items:[]},lastSeven:{label:(0,s.jsx)(B.Z,(0,o._)({},eo.historyBucketLastSeven)),items:[]},lastThirty:{label:(0,s.jsx)(B.Z,(0,o._)({},eo.historyBucketLastThirty)),items:[]}},dynamicMonths:{},dynamicYears:{}})},[C,T]);return(0,s.jsxs)(ea,{$centered:S||I&&O,children:[O&&S&&(0,s.jsx)(Q.Z,{className:"m-auto"}),O&&I&&(0,s.jsxs)("div",{className:"p-3 text-center italic text-gray-500",children:[(0,s.jsx)(B.Z,(0,o._)({},eo.unableToLoadHistory)),!u&&(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)(P.z,{as:"button",color:"dark",size:"small",className:"m-auto mt-2",onClick:function(){d(!0),$()},children:(0,s.jsx)(B.Z,(0,o._)({},eo.retryButton))})})]}),!S&&(0,s.jsx)("div",{children:(0,s.jsx)(b.M,{initial:!1,children:[H.recent,H.dynamicMonths,H.dynamicYears].flatMap(function(e,t){return(0,s.jsx)("span",{children:Object.entries(e).map(function(e){var t=(0,i._)(e,2),n=t[0],o=t[1],c=o.items,l=o.label;if("today"!==n&&!c.length)return null;var u=!!c.find(function(e){var t;return T.length>0&&e.id===(null===(t=T[0])||void 0===t?void 0:t.id)});return(0,s.jsxs)(x.E.div,{className:"relative",layoutId:"bucket-".concat(n),layout:"position",initial:{height:0,opacity:1,position:"relative"},animate:{height:"auto",opacity:1,transition:{duration:.2,ease:"easeIn"}},children:[c.length>0&&(0,s.jsx)(x.E.div,{className:(0,f.default)("sticky top-0",u?"z-[16]":"z-[14]"),layoutId:"bucketTitle-".concat(n),layout:"position",children:(0,s.jsx)(eh,{children:l})}),(0,s.jsx)("ol",{children:c.map(function(e,t){var n=r===e.id,o=null==U?void 0:U.find(function(t){return t.id===e.id}),i=D&&T[T.length-5-1].id===e.id?F:void 0;return(0,s.jsx)(x.E.li,{className:(0,f.default)("relative",u&&0===t?"z-[15]":""),layoutId:"".concat(e.id),layout:"position",custom:{isNew:!o},variants:er,initial:"initial",animate:"animate",exit:"exit",children:W?(0,s.jsx)(V.I,{conversation:e,isActive:n,elementRef:i}):(0,s.jsx)(es,{id:e.id,title:e.title,active:n,onNewThread:a,elementRef:i})},"history-item-".concat(e.id))})})]},n)})},"category-".concat(t))})})}),R?L&&(0,s.jsx)("div",{className:"m-4 mb-5 flex justify-center",children:(0,s.jsx)(Q.Z,{})}):(0,s.jsx)(s.Fragment,{children:D&&(0,s.jsx)(P.z,{as:"button",onClick:function(){return N()},color:"dark",className:"m-auto mb-2",size:"small",loading:L,children:(0,s.jsx)(B.Z,(0,o._)({},eo.showMoreButton))})})]})}var ea=D.Z.div(O(),function(e){return e.$centered&&"h-full justify-center items-center"});function es(e){var t=e.id,n=e.title,o=e.active,r=e.onNewThread,a=e.elementRef,h=(0,L.w$)(),g=(0,i._)((0,w.useState)(!1),2),v=g[0],y=g[1],m=(0,w.useRef)(null),p=(0,q.iF)(),b=(0,w.useCallback)(function(e){var o,r;if(null==e||e.preventDefault(),y(!1),(null===(o=m.current)||void 0===o?void 0:o.value)&&(null===(r=m.current)||void 0===r?void 0:r.value)!==n){var i=m.current.value;S.tQ.setTitle(t,i,S._L.User),u.o.logEvent(d.a.renameThread,{threadId:t,content:i}),N.ZP.patchConversation(t,{title:i}).then(function(){p()})}},[t,p,n]),x=(0,w.useCallback)(function(e){"Enter"===e.key&&b()},[b]),k=(0,w.useCallback)(function(){N.ZP.patchConversation(t,{is_visible:!1}).then(function(){p()}),r()},[t,r,p]),j=(0,w.useCallback)(function(e){F.hx.abortAllRequests(),e.preventDefault(),u.o.logEvent(d.a.loadThread,{threadId:t}),M().push((0,I.ZV)(t),void 0,{shallow:!0})},[t]),T=(0,R.Z)(t,n,o),Z=T.resolvedTitle,B=T.isTypingEffect,D=(0,s.jsx)(_.IC0,{className:"icon-sm"}),E=(0,i._)((0,w.useState)(!1),2),A=E[0],K=E[1];if((0,w.useEffect)(function(){if(o)return(0,c.LW)(l.n,{deleteChat:function(){K(!0)}})},[o]),v)return(0,s.jsxs)(eu,{$active:o,children:[D,(0,s.jsx)(ed,{ref:m,type:"text",defaultValue:null!=Z?Z:"",autoFocus:!0,onKeyDown:x,className:"mr-0",onBlur:b}),(0,s.jsxs)(ev,{$active:!0,children:[(0,s.jsx)(ey,{onClick:b,children:(0,s.jsx)(_.UgA,{className:"icon-sm"})}),(0,s.jsx)(ey,{onClick:function(e){e.preventDefault(),y(!1)},children:(0,s.jsx)(_.q5L,{className:"icon-sm"})})]})]});var P=B&&o&&h;return(0,s.jsxs)(s.Fragment,{children:[o&&A&&(0,s.jsx)(ec,{title:n,handleDelete:k,onClose:function(){K(!1)}}),(0,s.jsxs)(el,{onClick:o?C():j,$active:o,className:(0,f.default)("group",P&&"animate-flash"),ref:a,children:[D,(0,s.jsxs)(ef,{children:[P?(0,s.jsx)(z.Z,{text:null!=Z?Z:""}):Z,(!B||!o)&&(0,s.jsx)(eg,{$active:o})]}),o&&(0,s.jsxs)(ev,{$active:o,children:[(0,s.jsx)(ey,{onClick:function(e){e.preventDefault(),y(!0)},children:(0,s.jsx)(_.Nte,{className:"icon-sm"})}),(0,s.jsx)(ey,{onClick:function(){K(!0)},children:(0,s.jsx)(_.Ybf,{className:"icon-sm"})})]})]})]})}function ec(e){var t=e.title,n=e.handleDelete,i=e.onClose,a=(0,Z.Z)();return(0,s.jsx)(U.Z,{isOpen:!0,onClose:i,type:"success",title:a.formatMessage(eo.deleteModalTitle),primaryButton:(0,s.jsx)($.ZP.Button,{title:a.formatMessage(eo.deleteModalConfirm),color:"danger",onClick:function(){n(),i()}}),secondaryButton:(0,s.jsx)($.ZP.Button,{title:a.formatMessage(eo.deleteModalCancel),color:"neutral",onClick:i}),children:(0,s.jsx)(B.Z,(0,r._)((0,o._)({},eo.deleteModalBody),{values:{title:(0,s.jsx)("strong",{children:t})}}))})}var el=D.Z.a(W(),function(e){return e.$active?"bg-gray-100 dark:bg-gray-800 pr-14 dark:hover:bg-gray-800":"bg-gray-50 gizmo:bg-white gizmo:hover:bg-gray-100 hover:pr-4 dark:bg-gray-900"}),eu=D.Z.div(H(),function(e){return e.$active?"pr-14 bg-gray-100 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-800":"bg-gray-100 dark:bg-gray-900"}),ed=D.Z.input(X()),ef=D.Z.div(G()),eh=D.Z.h3(J()),eg=D.Z.div(ee(),function(e){return e.$active?"dark:from-gray-800 from-gray-100":"dark:from-gray-900 from-gray-50 gizmo:from-white group-hover:from-gray-100 dark:group-hover:from-[#2A2B32]"}),ev=D.Z.div(et(),function(e){return e.$active?"visible":"invisible group-hover:visible"}),ey=D.Z.button(en())},59100:function(e,t,n){n.d(t,{I:function(){return A},V:function(){return N}});var o=n(39324),r=n(22830),i=n(35250),a=n(95137),s=n(37469),c=n(78931),l=n(28735),u=n(10664),d=n(33669),f=n(66085),h=n(2166),g=n(47428),v=n(90408),y=n(82081),m=n(19841),p=n(60554),b=n.n(p),x=n(70079),k=n(1454),C=n(32004),j=n(94968),M=n(41932),w=n(6038),_=n(61402),T=n(92720),Z=n(80267),B=n(2295);function D(e){var t=e.conversation,n=e.handleEditTitle,s=(0,B.iF)(),c=(0,r._)((0,x.useState)(!1),2),d=c[0],f=c[1];return(0,x.useEffect)(function(){return(0,l.LW)(u.n,{deleteChat:function(){f(!0)}})},[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(T.Z.Root,{children:[(0,i.jsx)(g.xz,{asChild:!0,children:(0,i.jsxs)("button",{className:"absolute bottom-0 right-0 top-0 flex w-9 items-center justify-center rounded text-token-text-tertiary transition hover:text-token-text-secondary radix-state-open:text-token-text-secondary",children:[(0,i.jsx)("div",{className:"pointer-events-none absolute bottom-0 right-0 top-0 w-14 rounded bg-gradient-to-l from-token-surface-tertiary from-60% to-transparent"}),(0,i.jsx)(k.K9M,{className:"icon-sm relative"})]})}),(0,i.jsx)(T.Z.Portal,{children:(0,i.jsxs)(T.Z.Content,{align:"center",children:[(0,i.jsx)(T.Z.Item,{onClick:function(){n()},children:(0,i.jsx)(C.Z,(0,o._)({},L.renameConversation))}),(0,i.jsx)(T.Z.Item,{onClick:function(){f(!0)},children:(0,i.jsx)(C.Z,(0,o._)({},L.deleteConversation))})]})})]}),d&&(0,i.jsx)(Z.V,{title:t.title,handleDelete:function(){a.ZP.patchConversation(t.id,{is_visible:!1}).then(function(){s()}),b().push("/",void 0,{shallow:!0})},onClose:function(){f(!1)}})]})}function N(e){var t=e.size,n=void 0===t?"medium":t;return(0,i.jsx)("div",{className:"overflow-hidden rounded bg-black dark:bg-white",style:{height:w.EF[n],width:w.EF[n]}})}function E(e){var t=e.conversation,n=e.onClose,o=function(){l!==t.title&&(s.tQ.setTitle(t.id,l,s._L.User),v.o.logEvent(y.a.renameThread,{threadId:t.id,content:l}),a.ZP.patchConversation(t.id,{title:l}).then(function(){d()}))},c=(0,r._)((0,x.useState)(t.title),2),l=c[0],u=c[1],d=(0,B.iF)();return(0,i.jsx)("input",{type:"text",value:l,onChange:function(e){u(e.target.value)},onKeyDown:function(e){switch(e.key){case"Escape":n();break;case"Enter":o(),n()}},onBlur:function(){o(),n()},autoFocus:!0,className:"w-full border border-token-border-light bg-transparent p-0 text-sm"})}function S(e){var t=e.conversation,n=(0,c.ec)(function(e){return e.currentWorkspace});return null!=t.conversation_template_id&&null!=n?(0,i.jsx)(w.Ao,{workspaceId:n.id,templateId:t.conversation_template_id,iconSize:"small",className:"rounded"}):(0,i.jsx)(N,{size:"small"})}function A(e){var t=e.conversation,n=e.isActive,o=e.elementRef,a=(0,r._)((0,x.useState)(!1),2),s=a[0],c=a[1],l=(0,h.Z)(t.id,t.title,n),u=l.resolvedTitle,g=l.isTypingEffect,p=(0,d.w$)();return(0,i.jsxs)("div",{className:"group relative mx-1",children:[(0,i.jsxs)("a",{href:(0,f.ZV)(t.id),onClick:function(e){if(e.preventDefault(),!n){var o;o=t.id,_.hx.abortAllRequests(),v.o.logEvent(y.a.loadThread,{threadId:o}),b().push((0,f.ZV)(o),void 0,{shallow:!0})}},onDoubleClick:function(){c(!0)},ref:o,className:(0,m.default)("flex items-center gap-2 rounded p-2",n?"bg-token-surface-tertiary":"hover:bg-token-surface-tertiary"),children:[(0,i.jsx)("div",{children:(0,i.jsx)(S,{conversation:t})}),(0,i.jsxs)("div",{className:"relative grow overflow-hidden whitespace-nowrap",children:[g&&n&&p?(0,i.jsx)(M.Z,{text:null!=u?u:""}):u,(0,i.jsx)("div",{className:(0,m.default)("absolute bottom-0 right-0 top-0 w-8 bg-gradient-to-l to-transparent",n?"from-token-surface-tertiary":"from-token-surface-primary group-hover:from-token-surface-tertiary dark:from-gray-800")})]})]}),s?(0,i.jsx)("div",{className:"absolute bottom-0 left-[7px] right-2 top-0 flex items-center bg-token-surface-tertiary",children:(0,i.jsx)(E,{conversation:t,onClose:function(){c(!1)}})}):n?(0,i.jsx)(D,{conversation:t,handleEditTitle:function(){c(!0)}}):null]})}var L=(0,j.vU)({renameConversation:{id:"history.item.editConversationTitle",defaultMessage:"Rename conversation",description:"Menu item label in conversation sidebar"},deleteConversation:{id:"history.item.deleteConversation",defaultMessage:"Delete conversation",description:"Menu item label in conversation sidebar"}})},67:function(e,t,n){n.d(t,{X:function(){return c},m:function(){return l}});var o=n(4337),r=n(35250),i=n(9181),a=n.n(i);function s(){var e=(0,o._)(["rounded-full bg-black dark:bg-gray-100"]);return s=function(){return e},e}var c=n(21389).Z.div(s());function l(){return(0,r.jsx)(a(),{href:"/",shallow:!0,className:"block h-8 w-8",children:(0,r.jsx)(c,{className:"h-full w-full"})})}},10664:function(e,t,n){n.d(t,{n:function(){return S},A3:function(){return N},yx:function(){return R},JS:function(){return I}});var o,r,i,a=n(96237),s=n(39324),c=n(81949),l=n(15858),u=n(11084),d=n(82534),f=n(90408),h=n(82081),g=n(61888),v=n(70079),y=n(94968),m=n(95954),p=n(50253),b=n(88798),x=n(32877),k=n(37469),C=n(46020),j=n(78931),M=n(640),w=n(52787),_=n(45248),T=v.useLayoutEffect,Z=RegExp("```.*?\\n([\\s\\S]+?)\\n?```[^`]*$","gms");(o=r||(r={})).Core="Core",o.Chat="Chat",o.Settings="Settings";var B=(0,s._)({Mod:"mod",Comma:","},l.s),D=(i={},(0,a._)(i,B.Mod,/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)?"⌘":"Ctrl"),(0,a._)(i,B.Comma,","),(0,a._)(i,B.Enter,"⏎"),(0,a._)(i,B.Escape,"Esc"),(0,a._)(i,B.ArrowUp,"↑"),(0,a._)(i,B.ArrowDown,"↓"),(0,a._)(i,B.ArrowLeft,"←"),(0,a._)(i,B.ArrowRight,"→"),(0,a._)(i,B.Backspace,"⌫"),(0,a._)(i,B.Delete,"⌦"),(0,a._)(i,B.Tab,"⇥"),(0,a._)(i,B.Control,"Ctrl"),(0,a._)(i,B.Shift,"Shift"),i),N=function(e){var t;return e.map(function(e){return null!==(t=D[e])&&void 0!==t?t:e})},E=(0,y.vU)({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat",description:"Keyboard shortcut to open a new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input",description:"Keyboard shortcut to focus the chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block",description:"Keyboard shortcut to copy the last code block in the chat"},copyLastResponse:{id:"keyboardActions.copyLastResponse",defaultMessage:"Copy last response",description:"Keyboard shortcut to copy the last response in the chat"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions",description:"Keyboard shortcut to toggle custom instructions"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar",description:"Keyboard shortcut to toggle navigation"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat",description:"Keyboard shortcut to delete chat"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts",description:"Keyboard shortcut to toggle keyboard actions"}}),S=new M.V,A=function(e){var t=e.resetThreadAction,n=e.clientThreadId,o=e.features;return[{key:"newChat",action:t||g.noop,actionMessageDescriptor:E.newChat,group:r.Core,keyboardBinding:[B.Mod,B.Shift,"o"],altKeyboardBindings:[[B.Mod,"k"]]},{key:"focusPromptTextarea",action:p.go,actionMessageDescriptor:E.focusPromptTextarea,group:r.Chat,keyboardBinding:[B.Shift,B.Escape]},{key:"copyLastCodeBlock",action:function(){if(null!=n)for(var e=k.tQ.getThreadCurrentLeafId(n),t=k.tQ.getThreadConversationTurns(n,e),o=t.length-1;o>=0;o--){var r=t[o].messages.reduce(function(e,t){return null==t.err&&t.message.author.role===m.uU.Assistant&&"all"===t.message.recipient?e+(e?"\n\n":"")+(0,w.RR)(t.message):e},""),i=(0,c._)(r.matchAll(Z)),a=i.length?i[i.length-1][1]:null;if(null!=a){(0,u.S)(a).then(function(){b.m.success("Copied code block to clipboard")});break}}},actionMessageDescriptor:E.copyLastCodeBlock,group:r.Chat,keyboardBinding:[B.Mod,B.Shift,";"],altKeyboardBindings:[[B.Mod,B.Shift,":"]]},{key:"copyLastResponse",action:function(){null!=n&&k.tQ.copyLastMessageToClipboard(n,"keyboard").then(function(){b.m.success("Last response copied to clipboard")})},actionMessageDescriptor:E.copyLastResponse,group:r.Chat,keyboardBinding:[B.Mod,B.Shift,"c"]},{key:"toggleCustomInstructions",action:function(){return C.vm.toggleModal(C.B.UserContext)},actionMessageDescriptor:E.toggleCustomInstructions,group:r.Settings,keyboardBinding:[B.Mod,B.Shift,"i"],enabled:o.has(x.Rw)||o.has(x.uo)},{key:"navigationToggle",action:function(){return C.vm.toggleDesktopNavCollapsed()},actionMessageDescriptor:E.navigationToggle,group:r.Core,keyboardBinding:[B.Mod,B.Shift,"s"]},{key:"deleteChat",action:function(){S.publish({kind:"deleteChat"})},actionMessageDescriptor:E.deleteChat,group:r.Chat,keyboardBinding:[B.Mod,B.Shift,B.Backspace],altKeyboardBindings:[[B.Mod,B.Shift,B.Delete]]},{key:"toggleKeyboardActions",action:function(){return C.vm.toggleModal(C.B.KeyboardActions)},actionMessageDescriptor:E.toggleKeyboardActions,group:r.Settings,keyboardBinding:[B.Mod,"/"]}]},L=function(e){var t,n,o,r=(0,j.hz)().has(x.rk);return t=function(e){f.o.logEvent(h.a.keyboardShortcut,{keyboardActionKey:e.key}),d.U.addAction("chatgpt_keyboard_shortcut",{keyboardActionKey:e.key})},n={enabled:r},o=e.map(function(e){var t=e.keyboardBinding.join("+");if(e.altKeyboardBindings){t=[t];var n=e.altKeyboardBindings.map(function(e){return e.join("+")});t=t.concat(n)}return(0,_.ZP)(t,{byKey:!0})}),void T(function(){if((null==n?void 0:n.enabled)!==!1){var r=function(n){if(!n.repeat)for(var r=0;r<o.length;r++)o[r](n)&&(void 0===e[r].enabled||e[r].enabled)&&(n.preventDefault(),t(e[r]),e[r].action())},i=function(e){void 0!==e.key&&r(e)},a=document;return a.addEventListener("keydown",i),function(){a.removeEventListener("keydown",i)}}},[e,n])},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resetThreadAction,n=e.clientThreadId,o=(0,j.hz)();return(0,v.useMemo)(function(){return A({features:o,resetThreadAction:t,clientThreadId:n}).filter(function(e){var t=e.enabled;return void 0===t||t})},[n,o,t])},R=function(e){L(I({resetThreadAction:e.resetThreadAction,clientThreadId:e.clientThreadId}))}},2166:function(e,t,n){n.d(t,{Z:function(){return a}});var o=n(22830),r=n(70079),i=n(37469);function a(e,t,n){var a=(0,i.XL)(e),s=a.title,c=a.titleSource,l=(0,o._)((0,r.useState)(!1),2),u=l[0],d=l[1],f=null!=s?s:t,h=(0,r.useRef)(f);return(0,r.useEffect)(function(){return n&&c===i._L.Generated&&f!==h.current&&d(!0),function(){h.current=f}},[n,f,c]),{isTypingEffect:u,resolvedTitle:f}}},21817:function(e,t,n){n.d(t,{Z:function(){return r}});var o=n(70079);function r(){var e=(0,o.useRef)([]),t=(0,o.useRef)(function(t,n){var o=setTimeout(t,n);return e.current.push(o),o});return(0,o.useEffect)(function(){var t=e.current;return function(){t.forEach(function(e){clearTimeout(e)})}},[]),t.current}}}]);